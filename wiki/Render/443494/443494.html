<div class="wikidoc"><h1>How To</h1>This section is designed to provide answers to common questions or scenarios you might have or encounter with Wolfpack. It&#39;s split up by functional area and over time I might migrate a section to it&#39;s own page. I&#39;ll add to this page based on question I field about Wolfpack and my own experience in using it.<br />
<h2>General</h2><i><b>I have written a custom HealthCheck or other Wolfpack plugin that uses a non .Net dll - I get an error (BadImage) when Wolfpack starts because it is trying to scan this dll for Wolfpack plugins</b></i><br />Add the name of your assembly to an &lt;item&gt; in the TypeDiscoveryConfiguration component config in config\role.castle.config file. This will exclude that dll from being scanned by Wolfpack.<br />
<h2>Geckoboard</h2><i><b>How can I test the Geckoboard Data Service?</b></i><br />The Geckoboard Data Service will only accept POST requests (so the it can support the ApiKey feature). If you get an &quot;Http Method Not Allowed&quot; then you are trying to call the url from a browser/curl as a GET - to test it you need to make a POST request.
<ol><li>Download and install <a href="http://Fiddler">http://www.fiddler2.com/fiddler2/</a>.</li>
<li>Run Fiddler and select the &quot;Request Builder&quot; tab</li>
<li>Set the method drop down to POST</li>
<li>Enter the your Geckoboard Data Service url</li>
<li>In the &quot;request headers&quot; section add these two lines &quot;Content-Type: text/plain&quot; and &quot;Content-Length: 3&quot;</li>
<li>In the &quot;request body&quot; section type some gibberish text - any few characters will do</li>
<li>Click the &quot;Execute&quot; button - you should see a 200 Ok response</li></ol>

<h2>Publishing</h2><i><b>I use the Growl Publisher but want to modify the message text and the priority as I don&#39;t like the default values.</b></i><br />Use a Growl Notification Finaliser - either the built-in Success Finaliser if you want to modify the Growl Notification properties based on the success/failure of a HealthCheck result or the Count Finaliser if you want to modify the notification based on the ResultCount value. You can also combine these Finalisers although the order they will run is undefined.<br /><br />Alternatively you can create your own Growl Notification Finaliser. This will allow you inject custom logic to inspect the HealthCheck result and then set any property on the Growl Notification that will be passed to the Growl Api.
<ol><li>Add a reference to Wolfpack.Core.dll</li>
<li>Create a new class and make it inherit from GrowlNotificationInterceptorBase and implement the &quot;Finalise&quot; method. This method has two parameters, the HealthCheck result and the Growl Notification Api object - this will have the message text and priority already set by the Growl HealthCheck Result Pulisher but you can modify these as you see fit.</li>
<li>Add a component configuration to the finaliser.castle.config file...
<ol><li>The &quot;id&quot; attribute needs to be descriptive and unique. </li>
<li>The &quot;type&quot; attribute is the fully class name including the namespace in this format; &quot;full classname, assembly name&quot;. So if your custom finaliser is called &quot;CustomFinaliser&quot; in the namespace &quot;MyWolfpack.Finalisers&quot; within &quot;MyWolfpack.dll&quot; then the &quot;type&quot; value is &quot;MyWolfpack.Finalisers.CustomFinaliser, MyWolfpack&quot;</li>
<li>If you need to provide configuration values to your custom Notification Finaliser then add public properties (getter &amp; setter) then add the corresponding item within the &lt;parameters&gt; section in the component configuration.</li>
<li>The &lt;Check&gt; parameter must be supplied. Use this to associate your Notification Finaliser with a specific HealthCheck (in which case enter the Friendly Id of the HealthCheck, this is found in the check.castle.config file) or use * to associate it with all HealthChecks.</li></ol></li></ol>
<br /><i><b>I use the Growl Publisher with Prowl to get HealthCheck results on my iPhone but I only want to receive Prowl/iPhone notifications if my HealthCheck returns a value higher/lower than a specific number - eg: free disk space is too low or there is too many messages in a MSMQ Queue.</b></i><br />When you register your iPhone with Growl to receive notifications you can set a minimum priority level to forward - eg: only forward the notification to your iPhone if the priority is the same or above the level you specify. With this in mind you can use the builtin Wolfpack <b>GrowlCountNotificationFinaliser</b> to set a &quot;Threshold&quot; level (eg: too many messages in an MSMQ Queue) and then set the HigherPriority to &quot;High&quot; (the LowerPriority will default to &quot;Normal&quot;). In Growl - configure your iPhone notifications to only forward if the level is &quot;High (or above)&quot;. When you publish to Growl a MSMQ Info HealthCheck result that contains a ResultCount value above or equal to the &quot;Threshold&quot; it will be sent to Growl with priority &quot;High&quot; and &quot;Normal&quot; if it is lower. To configure iPhone notifications when a value goes <i>below</i> the &quot;Threshold&quot; then set the &quot;LowerPriority&quot; to &quot;High&quot; and leave the &quot;HigherPriority&quot; as &quot;Normal&quot; or omit it altogether. Growl itself will receive and display <b>all</b> notifications but your iPhone will only have the notification forwarded to it when the priority is set appropriately by the Finaliser.</div><div class="ClearBoth"></div>
<div class="wikidoc"><h1>Getting Started</h1>This provides information on installation and configuration of Wolfpack.<br />
<h2>Custom plugin development</h2>If you just want to develop either a new custom <a href="https://wolfpack.codeplex.com/wikipage?title=Health%20Checks&referringTitle=Getting%20Started">HealthCheck</a>, <a href="https://wolfpack.codeplex.com/wikipage?title=Configuring%20Publishers&referringTitle=Getting%20Started">Publisher</a> or <a href="https://wolfpack.codeplex.com/wikipage?title=Build%20Analytics&referringTitle=Getting%20Started">Build Analytics</a> component then the quickest route is via the NuGet packages. Wolfpack is now on <a href="http://nuget.org">NuGet!</a>; Rob Gibbens has created the NuGet packages to support &amp; streamline custom HealthCheck and Publisher development. These contain just the binaries required to develop these plugins for Wolfpack. You can get the packages from the NuGet gallery via the online package browser in Visual Studio - just search for &quot;Wolfpack&quot;...Thanks Rob, great job!<br />
<h2>Installing and running Wolfpack</h2><i>22-Oct-2012</i> Wolfpack is now on <a href="http://chocolatey.org/packages/Wolfpack">Chocolatey</a>! If you are a chocolatey user then install with &quot;cinst wolfpack&quot;. This will pull down the wolfpack nuget package and install it to c:\chocolatey\lib\wolfpack.x.y.z. It will also create a batch file to start wolfpack, just type &quot;wolfpack.agent&quot; in any command window - sweeeet!<br /><br /><i>for non-chocolatey users....</i><br />To start with, download the latest binaries zip (or source and build it yourself) from the associated codeplex pages. <br /><br />Wolfpack is based on the TopShelf windows service framework. This means you can run it as either a console application (recommended whilst you evaluate) or install it as an unattended windows service (recommended for real use). All exceptions are logged to the <b>Wolfpack.log</b> file in the application folder using Log4Net - check this if you have trouble starting Wolfpack.<br /><br />To run it as a console application, open a command prompt and type,<br /><div style="color:Black;background-color:White;"><pre>
wolfpack.agent.exe
</pre></div>To install and execute it as a windows service running under the <b>Local System</b> account, open a command prompt and type,<br /><div style="color:Black;background-color:White;"><pre>
wolfpack.agent.exe <span style="color:Gray;">/</span>install
</pre></div>To install and execute it as a windows service running under the custom account, open a command prompt and type,<br /><div style="color:Black;background-color:White;"><pre>
wolfpack.agent.exe <span style="color:Gray;">/</span>install <span style="color:Gray;">/</span>username:<span style="color:Gray;">[</span><span style="color:Teal;">DOMAIN\Account</span><span style="color:Gray;">]</span> <span style="color:Gray;">/</span>password:<span style="color:Gray;">[</span><span style="color:Teal;">Password</span><span style="color:Gray;">]</span>
</pre></div>To uninstall it as a windows service, open a command prompt and type,<br /><div style="color:Black;background-color:White;"><pre>
wolfpack.agent.exe <span style="color:Gray;">/</span>uninstall
</pre></div>There are several &quot;profiles&quot; that alter the behaviour of Wolfpack. Supported profile names are,
<ul><li><b>FastStartAgentProfile</b> - this will asynchronously startup the agent so that control is quickly returned to the Windows Service Control Manager - this stops timeouts occurring when you have a large number of plugins configured and enabled. Access these additional profiles with,</li></ul>
<div style="color:Black;background-color:White;"><pre>
wolfpack.agent.exe <span style="color:Gray;">/</span>profile:<span style="color:Gray;">[</span><span style="color:Teal;">profile name</span><span style="color:Gray;">]</span>
</pre></div>
<h2>Configuring Wolfpack</h2>Wolfpack uses Castle/Windsor as it&#39;s IoC/Container. I&#39;ve hopefully abstracted the concrete Windsor container away from the code so it should be possible to replace the IoC/Container with another framework if desired. The main use of the Container is to register &quot;configuration&quot; components which are used to infer and load an associated component (plugin) that performs as either a &quot;Publisher&quot;, &quot;HealthCheck&quot;, &quot;Activity&quot; or &quot;Scheduler&quot;.<br /><br /><i>However...</i> - I&#39;ve exposed some Castle namespace components out via the &quot;Container&quot; helper which means Wolfpack is <b>now locked to Castle</b> - this was required to get the Publisher Filter functionality to work as it uses Castle Interception - the good news is that I was being a bit lazy and didn&#39;t want to create Wolfpack wrappers over the components and exposed the Castle ones directly so it would be <b>possible to put Castle &quot;back in the box&quot;</b> - you would also need to implement your own Publisher Interception mechanism in what ever IoC container you replace Castle with. <br /><br />A full list of container configuration files is below but there are three main ones in the config folder to play around with initially, the check, publisher and binding config files.<br /><br />The check.castle.config file contains the setting for each individual health check that Wolfpack executes. The only rule is that each one has to have a unique component id attribute value and a unique &quot;FriendlyId&quot; value, so it makes sense for these to be the same. Each &quot;component&quot; represents a health check instance. If the &quot;Enabled&quot; property is true then Wolfpack will query the binding.castle.config file to try to link it to a schedule (when it should execute) - if it finds a match it creates an instance of the health check and starts running it on the schedule indicated in the binding. 
<h3>Configuration by Example</h3>One of the example HealthChecks is &quot;IsNotepadRunning&quot; - so lets use this as a template for your first configuration modification, we&#39;ll create a new HealthCheck to check for the calc.exe process.<br />1. In the check.castle.config file, copy the IsNotepadRunning&quot; component and rename the id attribute and &quot;FriendlyId&quot; property to &quot;IsCalcRunning&quot;.<br />2. Change the &quot;ProcessName&quot; property to &quot;calc.exe&quot;.<br /><div style="color:Black;background-color:White;"><pre>
    <span style="color:Blue;">&lt;</span><span style="color:#A31515;">component</span> <span style="color:Red;">id</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IsCalcRunning</span><span style="color:Black;">&quot;</span>
				   <span style="color:Red;">lifestyle</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">singleton</span><span style="color:Black;">&quot;</span>
				   <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Wolfpack.Core.Checks.WmiProcessRunningCheckConfig, Wolfpack.Core</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
      <span style="color:Blue;">&lt;</span><span style="color:#A31515;">parameters</span><span style="color:Blue;">&gt;</span>
        <span style="color:Blue;">&lt;</span><span style="color:#A31515;">FriendlyId</span><span style="color:Blue;">&gt;</span>IsCalcRunning<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">FriendlyId</span><span style="color:Blue;">&gt;</span>
        <span style="color:Blue;">&lt;</span><span style="color:#A31515;">Enabled</span><span style="color:Blue;">&gt;</span>true<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">Enabled</span><span style="color:Blue;">&gt;</span>
        <span style="color:Blue;">&lt;</span><span style="color:#A31515;">RemoteMachineId</span><span style="color:Blue;">&gt;</span>localhost<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">RemoteMachineId</span><span style="color:Blue;">&gt;</span>
        <span style="color:Blue;">&lt;</span><span style="color:#A31515;">ProcessName</span><span style="color:Blue;">&gt;</span>calc.exe<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">ProcessName</span><span style="color:Blue;">&gt;</span>
      <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">parameters</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">component</span><span style="color:Blue;">&gt;</span>
</pre></div>3. Update the binding.castle.config file, find the &quot;IsNotepadRunningBindingConfig&quot; component and copy it<br />4. Rename the component id to &quot;IsCalcRunningBindingConfig&quot;.<br />5. Update the &quot;HealthCheckConfigurationName&quot; property to &quot;IsCalcRunning&quot; (this &quot;binds&quot; our new HealthCheck to the schedule named &quot;EveryMinute&quot;)<br /><div style="color:Black;background-color:White;"><pre>
    <span style="color:Blue;">&lt;</span><span style="color:#A31515;">component</span> <span style="color:Red;">id</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">IsCalcRunningBindingConfig</span><span style="color:Black;">&quot;</span>
				   <span style="color:Red;">lifestyle</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">singleton</span><span style="color:Black;">&quot;</span>
				   <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Wolfpack.Core.Interfaces.Entities.BindingConfiguration, Wolfpack.Core.Interfaces</span><span style="color:Black;">&quot;</span><span style="color:Blue;">&gt;</span>
      <span style="color:Blue;">&lt;</span><span style="color:#A31515;">parameters</span><span style="color:Blue;">&gt;</span>
        <span style="color:Blue;">&lt;</span><span style="color:#A31515;">HealthCheckConfigurationName</span><span style="color:Blue;">&gt;</span>IsCalcRunning<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">HealthCheckConfigurationName</span><span style="color:Blue;">&gt;</span>
        <span style="color:Blue;">&lt;</span><span style="color:#A31515;">ScheduleConfigurationName</span><span style="color:Blue;">&gt;</span>EveryMinute<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">ScheduleConfigurationName</span><span style="color:Blue;">&gt;</span>
      <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">parameters</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">component</span><span style="color:Blue;">&gt;</span>
</pre></div>6. Restart Wolfpack, you should see your new HealthCheck &quot;IsCalcRunning&quot; appear. Try opening calc.exe and leave it running for a few minutes, then close it....Wolfpack should start to report failures when it is not running (remember it&#39;s not instant as it only checks once a minute).<br />7. That&#39;s it - you have created your first HealthCheck by reconfiguring Wolfpack. <b>Remember</b> you can create as many checks as you like; you can even create new &quot;schedules&quot; for them by creating new entries in the schedule.castle.config file. Just remember to add an entry in the binding.castle.config file to link the two together - its job as its name implies is to bind a HealthCheck to a Schedule.<br />
<h3>Binding by Convention</h3>A new feature of v2.3 is the creation of bindings based on a simple folder name convention. Essentially this removes the need for an entry in the bindings.castle.config file by using the folder name the healthcheck config file is located in as the name of the schedule to bind it to.
<ul><li>Any sub-folder of the &quot;config\checks&quot; folder is assumed to be the name of a schedule component in schedule.castle.config.</li>
<li>Wolfpack comes with a &quot;config\checks\everyminute&quot; folder installed. Create more health check config files into this folder to run them &quot;Every Minute&quot;.</li>
<li>To create a new automatic binding just create a new sub folder, eg: &quot;EveryHour&quot; in the &quot;config\checks&quot; folder
<ul><li>Ensure you have a component id with the same name in your schedule.castle.config file.</li></ul></li></ul>

<h3>Configuration Folder Structure</h3>The <b>Config</b> application folder mainly contains the configuration files for each of these component roles,
<ul><li><b>Checks</b> subfolder contains the healthcheck configuration files, one per health check</li>
<li><b>Publishers</b> subfolder contains the publisher configuration files, one per publisher</li></ul>

<h4>Important Files</h4><ul><li><b>activity.castle.config</b> - registers the configuration component for an &quot;Activity&quot;
<ul><li>This is a standard Castle component configuration file</li>
<li>WCF Service &quot;Uri&quot; - where the service listens</li>
<li>NSB queue to receive Wolfpack data</li></ul></li>
<li><b>binding.castle.config</b> - this is used to associate a HealthCheck to its Scheduler
<ul><li>This is a standard Castle component configuration file</li>
<li>The component &quot;id&quot; must be unique but is otherwise not important</li>
<li>The HealthCheckConfigurationName &amp; ScheduleConfigurationName property values must match a component &quot;id&quot; in the check.castle.config and scheduler.castle.config file respectively.</li></ul></li>
<li><b>filter.castle.config</b> - this is used to provide configuration to each Publisher Filter
<ul><li>This is a standard Castle component configuration file</li></ul></li>
<li><b>finaliser.castle.config</b> - this is used to provide configuration to each Growl Notification Finaliser
<ul><li>This is a standard Castle component configuration file</li></ul></li>
<li><b>log4net.config</b> - standard log4net config, see <a href="http://logging.apache.org/log4net/release/config-examples.html">http://logging.apache.org/log4net/release/config-examples.html</a> for more details.
<ul><li>Errors are output to the Wolfpack.log file in the application folder - check this if you have trouble starting the service.</li></ul></li>
<li><b>role.castle.config</b> - this provides configuration for the Wolfpack instance
<ul><li>This is a standard Castle component configuration file</li>
<li>SiteId is the name of the instance and should be unique per Wolfpack installation. It is used to identify the origin of monitoring data</li></ul></li>
<li><b>scheduler.castle.config</b> - provides the configuration to the schedulers. You can create as many of these as you like with whatever intervals you require. Just use an entry in the binding.castle.config to associate a HealthCheck with the Schedule via the component &quot;id&quot;.
<ul><li>This is a standard Castle component configuration file</li></ul></li></ul>
Activity, HealthCheck and Publisher config components all support an &quot;Enabled&quot; property - set this to &quot;true&quot; or &quot;false&quot; as desired; this provides a very quick way of changing the behaviour of the monitor without having to comment out/removed whole sections of configuration.<br /><br /><b>Important...</b> by default, only the Growl publisher is enabled. I chose this one as, although it requires you to install Growl it&#39;s a visible and simple method to demonstrate that Wolfpack is working. See <a href="http://Wolfpack.codeplex.com/wikipage?title=Configuring%20Publishers#Growl">this guide on setting up Growl (and the other publishers)</a>.<br /><br /><b>Remember</b> to configure the activities, publishers and healthchecks before you start Wolfpack. Restart Wolfpack to pick up any changes you make to these files whilst it is running.<br /><br /><b>Remember</b> the account you run Wolfpack under as a service must have permissions to perform the checks you have configured it for. For instance, if you are using the MSMQ checks the service account must have the correct permissions on the MSMQ in question.</div><div class="ClearBoth"></div>
{
  "WorkItem": {
    "AffectedComponent": {
      "Name": "",
      "DisplayName": ""
    },
    "ClosedComment": "",
    "ClosedDate": null,
    "CommentCount": 1,
    "Custom": null,
    "Description": "I setup a SQL Azure DB for logging Wolfpack messages and was unsuccessful.  \r\n\r\n```\r\n2013-05-28 08:35:07,539 [4] ERROR Topshelf.Model.ServiceCoordinator [(null)] - Fault on Wolfpack: Topshelf.Exceptions.ServiceControlException\r\nService Start Exception: Wolfpack (IRolePlugin)\r\n   at Topshelf.Builders.LocalServiceBuilder`1.StartService(T service) in d:\\BuildAgent-01\\work\\799c08e77fef999d\\src\\Topshelf\\Config\\Builders\\LocalServiceBuilder.cs:line 69\r\n   at Topshelf.Model.LocalServiceController`1.CallAction[TBefore,TComplete](String text, Action`1 callback, Func`1 before, Func`1 complete) in d:\\BuildAgent-01\\work\\799c08e77fef999d\\src\\Topshelf\\Model\\LocalServiceController.cs:line 153\r\nHelpLink: \r\n\r\nSystem.Data.SqlClient.SqlException\r\nTables without a clustered index are not supported in this version of SQL Server. Please create a clustered index and try again.\r\n   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)\r\n   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite)\r\n   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite)\r\n   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite)\r\n   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()\r\n   at Wolfpack.Core.Database.AdhocCommandBase.ExecuteNonQuery() in c:\\Projects\\Wolfpack\\Trunk\\Releases\\v2.4.0\\Source\\Wolfpack.Core\\Database\\AdhocCommandBase.cs:line 128\r\n   at Wolfpack.Core.Database.SqlServer.SqlHealthCheckSessionPublisher.Publish(HealthCheckAgentStart message) in c:\\Projects\\Wolfpack\\Trunk\\Releases\\v2.4.0\\Source\\Wolfpack.Core\\Database\\SqlServer\\SqlServerPublishers.cs:line 148\r\n   at Wolfpack.Core.Database.SqlServer.SqlHealthCheckSessionPublisher.Consume(HealthCheckAgentStart message) in c:\\Projects\\Wolfpack\\Trunk\\Releases\\v2.4.0\\Source\\Wolfpack.Core\\Database\\SqlServer\\SqlServerPublishers.cs:line 154\r\n   at Magnum.Pipeline.Segments.MessageConsumerSegment`1.<>c__DisplayClassd`1.<Accept>b__c(T x) in d:\\Builds\\MassTransit-Magnum\\src\\Magnum\\Pipeline\\Segments\\MessageConsumerSegment.cs:line 61\r\n   at Magnum.Pipeline.Segments.PipeSegment.<>c__DisplayClass1`1.<Send>b__0(MessageConsumer`1 consumer) in d:\\Builds\\MassTransit-Magnum\\src\\Magnum\\Pipeline\\Segments\\PipeSegment.cs:line 31\r\n   at Magnum.Extensions.ExtensionsToEnumerable.Each[T](IEnumerable`1 collection, Action`1 callback) in d:\\Builds\\MassTransit-Magnum\\src\\Magnum\\Extensions\\ExtensionsToEnumerable.cs:line 32\r\n   at Magnum.Pipeline.Segments.PipeSegment.Send[T](T message) in d:\\Builds\\MassTransit-Magnum\\src\\Magnum\\Pipeline\\Segments\\PipeSegment.cs:line 31\r\n   at Wolfpack.Core.MagnumMessenger.Wolfpack.Core.Interfaces.IMessenger.Publish(HealthCheckAgentStart message) in c:\\Projects\\Wolfpack\\Trunk\\Releases\\v2.4.0\\Source\\Wolfpack.Core\\Messenger.cs:line 70\r\n   at Wolfpack.Core.Messenger.Publish(HealthCheckAgentStart message) in c:\\Projects\\Wolfpack\\Trunk\\Releases\\v2.4.0\\Source\\Wolfpack.Core\\Messenger.cs:line 28\r\n   at Wolfpack.Agent.Roles.Agent.Start() in c:\\Projects\\Wolfpack\\Trunk\\Releases\\v2.4.0\\Source\\Wolfpack.Agent\\Roles\\Agent.cs:line 144\r\n   at Wolfpack.Agent.Startup.<>c__DisplayClass8.<Main>b__6(IRolePlugin s) in c:\\Projects\\Wolfpack\\Trunk\\Releases\\v2.4.0\\Source\\Wolfpack.Agent\\Startup.cs:line 84\r\n   at Topshelf.Builders.LocalServiceBuilder`1.StartService(T service) in d:\\BuildAgent-01\\work\\799c08e77fef999d\\src\\Topshelf\\Config\\Builders\\LocalServiceBuilder.cs:line 65\r\nHelpLink: \r\n\r\n\r\n2013-05-28 08:35:07,561 [3] ERROR Topshelf.Model.ServiceWorkflow [(null)] - [Wolfpack] Fault: Topshelf.Exceptions.ServiceControlException\r\nService Start Exception: Wolfpack (IRolePlugin)\r\n   at Topshelf.Builders.LocalServiceBuilder`1.StartService(T service) in d:\\BuildAgent-01\\work\\799c08e77fef999d\\src\\Topshelf\\Config\\Builders\\LocalServiceBuilder.cs:line 69\r\n   at Topshelf.Model.LocalServiceController`1.CallAction[TBefore,TComplete](String text, Action`1 callback, Func`1 before, Func`1 complete) in d:\\BuildAgent-01\\work\\799c08e77fef999d\\src\\Topshelf\\Model\\LocalServiceController.cs:line 153\r\nHelpLink: \r\n\r\nSystem.Data.SqlClient.SqlException\r\nTables without a clustered index are not supported in this version of SQL Server. Please create a clustered index and try again.\r\n   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)\r\n   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite)\r\n   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite)\r\n   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite)\r\n   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()\r\n   at Wolfpack.Core.Database.AdhocCommandBase.ExecuteNonQuery() in c:\\Projects\\Wolfpack\\Trunk\\Releases\\v2.4.0\\Source\\Wolfpack.Core\\Database\\AdhocCommandBase.cs:line 128\r\n   at Wolfpack.Core.Database.SqlServer.SqlHealthCheckSessionPublisher.Publish(HealthCheckAgentStart message) in c:\\Projects\\Wolfpack\\Trunk\\Releases\\v2.4.0\\Source\\Wolfpack.Core\\Database\\SqlServer\\SqlServerPublishers.cs:line 148\r\n   at Wolfpack.Core.Database.SqlServer.SqlHealthCheckSessionPublisher.Consume(HealthCheckAgentStart message) in c:\\Projects\\Wolfpack\\Trunk\\Releases\\v2.4.0\\Source\\Wolfpack.Core\\Database\\SqlServer\\SqlServerPublishers.cs:line 154\r\n   at Magnum.Pipeline.Segments.MessageConsumerSegment`1.<>c__DisplayClassd`1.<Accept>b__c(T x) in d:\\Builds\\MassTransit-Magnum\\src\\Magnum\\Pipeline\\Segments\\MessageConsumerSegment.cs:line 61\r\n   at Magnum.Pipeline.Segments.PipeSegment.<>c__DisplayClass1`1.<Send>b__0(MessageConsumer`1 consumer) in d:\\Builds\\MassTransit-Magnum\\src\\Magnum\\Pipeline\\Segments\\PipeSegment.cs:line 31\r\n   at Magnum.Extensions.ExtensionsToEnumerable.Each[T](IEnumerable`1 collection, Action`1 callback) in d:\\Builds\\MassTransit-Magnum\\src\\Magnum\\Extensions\\ExtensionsToEnumerable.cs:line 32\r\n   at Magnum.Pipeline.Segments.PipeSegment.Send[T](T message) in d:\\Builds\\MassTransit-Magnum\\src\\Magnum\\Pipeline\\Segments\\PipeSegment.cs:line 31\r\n   at Wolfpack.Core.MagnumMessenger.Wolfpack.Core.Interfaces.IMessenger.Publish(HealthCheckAgentStart message) in c:\\Projects\\Wolfpack\\Trunk\\Releases\\v2.4.0\\Source\\Wolfpack.Core\\Messenger.cs:line 70\r\n   at Wolfpack.Core.Messenger.Publish(HealthCheckAgentStart message) in c:\\Projects\\Wolfpack\\Trunk\\Releases\\v2.4.0\\Source\\Wolfpack.Core\\Messenger.cs:line 28\r\n   at Wolfpack.Agent.Roles.Agent.Start() in c:\\Projects\\Wolfpack\\Trunk\\Releases\\v2.4.0\\Source\\Wolfpack.Agent\\Roles\\Agent.cs:line 144\r\n   at Wolfpack.Agent.Startup.<>c__DisplayClass8.<Main>b__6(IRolePlugin s) in c:\\Projects\\Wolfpack\\Trunk\\Releases\\v2.4.0\\Source\\Wolfpack.Agent\\Startup.cs:line 84\r\n   at Topshelf.Builders.LocalServiceBuilder`1.StartService(T service) in d:\\BuildAgent-01\\work\\799c08e77fef999d\\src\\Topshelf\\Config\\Builders\\LocalServiceBuilder.cs:line 65\r\nHelpLink: \r\n\r\n\r\n2013-05-28 08:35:08,535 [1] ERROR Topshelf.Hosts.ConsoleRunHost [(null)] - An exception occurred\r\nTopshelf.Exceptions.TopshelfException: At least one configured service failed to start\r\n   at Topshelf.Model.ServiceCoordinator.WaitUntilServicesAreRunning(IEnumerable`1 services, TimeSpan timeout) in d:\\BuildAgent-01\\work\\799c08e77fef999d\\src\\Topshelf\\Model\\ServiceCoordinator.cs:line 223\r\n   at Topshelf.Model.ServiceCoordinator.Start() in d:\\BuildAgent-01\\work\\799c08e77fef999d\\src\\Topshelf\\Model\\ServiceCoordinator.cs:line 116\r\n   at Topshelf.Hosts.ConsoleRunHost.Run() in d:\\BuildAgent-01\\work\\799c08e77fef999d\\src\\Topshelf\\Hosts\\ConsoleRunHost.cs:line 65\r\n```\r\n\r\nIf I have time, I will try to fix the errors and report back to you the changes I made.",
    "LastUpdatedDate": "2013-05-29T04:56:55.287-07:00",
    "PlannedForRelease": "",
    "ReleaseVisibleToPublic": false,
    "Priority": {
      "Name": "Unassigned",
      "Severity": 0,
      "Id": 0
    },
    "ProjectName": "wolfpack",
    "ReportedDate": "2013-05-28T06:39:20.843-07:00",
    "Status": {
      "Name": "Proposed",
      "Id": 1
    },
    "ReasonClosed": {
      "Name": "Unassigned"
    },
    "Summary": "SQL Azure Table create failure",
    "Type": {
      "Name": "Unassigned",
      "Id": 5
    },
    "VoteCount": 1,
    "Id": 11
  },
  "FileAttachments": [],
  "Comments": [
    {
      "Message": "Great stuff - never tried to run it against Azure storage so this is pretty interesting.\n\nDo note that in v3 there is a proper INotificationRepository interface and repository layer with an Entity Framework implementation however I can't get it to work without some hassle due to enums in the entities - I would need to upgrade to VS2012 to support this...its on the TODO list!\n\nCheers,\n\nJames",
      "PostedDate": "2013-05-29T04:56:55.287-07:00",
      "Id": 101536
    }
  ]
}